<section #consumer_checkinbill class="container p0 confirm-aptckn no-padding-small" *ngIf="invoiceInfo === 'false'">
    <div [ngClass]="{'loadingpaytm': loadingPaytm}"></div>
    <div class="content p0 comn-cls cons-check-bill">
        <div class="c-outer" style="margin-bottom: 0px !important;" *ngIf="source == 'provider_history'">
            <div class="c-body">
                <div class="bk-ctrl">
                    <span class="backtoresults" (click)="backtoProviderDetails()">Back to <span
                            class="strong">history</span></span>
                </div>
            </div>
        </div>
        <app-common-innerloading-spinner *ngIf="api_loading"></app-common-innerloading-spinner>
        <div class="col-md-12 no-padding" *ngIf="!api_loading">
            <div class="w-dta">
                <div class="row m-0">
                    <div class="c-outer m0">
                        <div class="c-body">
                            <div class="card title-gb">
                                <h5 *ngIf="(bill_data.amountDue != 0)" class="mgn-up-10">Invoice<a
                                        class="pull-left mgn-rt-20 back-btn" (click)="goBack()"><i
                                            class="fa fa-arrow-left"></i></a></h5>
                                <h5 *ngIf="(bill_data.amountDue == 0)" class="mgn-up-10">Invoice<a
                                        class="pull-left mgn-rt-20 back-btn" (click)="goBack()"><i
                                            class="fa fa-arrow-left"></i></a></h5>
                            </div>
                            <div class="copy one">
                                <div class="col-a pl0 col-md-12 col-lg-12 col-xl-12 col-sm-12 col-12 no-padding">
                                    <div class="card bill-section  checkin-invoice">
                                        <div class="bill-section-content">
                                            <div class="col-md-12 col-sm-12 col-lg-12 bill-wrapper viewBill no-padding-small"
                                                *ngIf="bill_data">
                                                <div class="global-icons col-md-12 col-sm-12 col-lg-12">
                                                    <button (click)="printMe()" [matTooltipClass]="tooltipcls"
                                                        [matTooltip]="'Print'">
                                                        <i class="fa fa-print" aria-hidden="true"></i>
                                                    </button>
                                                </div>
                                                <div id="receipt" class="receipt">
                                                    <div class="bill-header mgn-up-50" *ngIf="!showPaidlist">
                                                        <div class="section-one" *ngIf="splocation">
                                                            <div class="pro-logo1 text-center"  *ngIf="logo">
                                                                <img src="{{logo}}" width="80px" height="80px" >
                                        
                                                            </div>
                                                        <div class="bname-ch"><h3>{{bname | capitalizeFirst}}</h3></div>  
                                                            <span
                                                                style="display:flex;justify-content: center;">{{splocation}}
                                                                <span class="icon-location"></span>
                                                            </span>
                                                            <br><br><br>
                                                            <div style="display: flex;justify-content: space-between;">
                                                                <div>
                                                                    <div *ngIf="bill_data.billFor">
                                                                        <div>
                                                                            <span *ngIf="bill_data.billFor.firstName">{{bill_data.billFor.firstName | capitalizeFirst}}</span>
                                                                            <span *ngIf="bill_data.billFor.lastName">{{bill_data.billFor.lastName | capitalizeFirst}}</span>
                                                                           
                                                                        </div>

                                                                    </div>
                                                                    <!-- <div *ngFor="let user of checkin.appmtFor">
                                                                        <div>
                                                                            {{user.firstName | capitalizeFirst}}
                                                                            {{user.lastName | capitalizeFirst}}
                                                                        </div>

                                                                    </div> -->
                                                                    <!-- <div *ngIf="billnumber" style="display: flex;
                                                                            justify-content: start;
                                                                            gap: 5px;">
                                                                        <div>Invoice #</div>
                                                                        <div>{{billnumber}}</div>

                                                                    </div> -->

                                                                </div>
                                                                <div>
                                                                    <div *ngIf="gstnumber">
                                                                        <div>
                                                                            {{gstin_cap}} :
                                                                            {{gstnumber
                                                                            |
                                                                            capitalizeFirst}}
                                                                        </div>
                                                                    </div>
                                                                    <div>
                                                                        {{billdate
                                                                        | date:newDateFormat_date}}
                                                                        <!-- {{billtime}} &nbsp; -->
                                                                    </div>

                                                                </div>
                                                            </div>
                                                            <span class="columns mgn-up-10" *ngIf="checkin.provider">
                                                                <span class="dynamic">{{getTerminologyTerm('provider')
                                                                    |
                                                                    capitalizeFirst}}: </span>
                                                                <span class="dynamic">
                                                                    <!-- {{checkin.provider.businessName}} -->
                                                                    {{(checkin.provider.businessName) ?
                                                                    checkin.provider.businessName :
                                                                    checkin.provider.firstName
                                                                    + ' ' + checkin.provider.lastName}}
                                                                </span>
                                                            </span>

                                                            <div class="col-md-12 col-sm-12 col-lg-12 no-padding red"
                                                                *ngIf="bill_data.billStatus == 'Cancel'">
                                                                Cancelled</div>
                                                                <div class="col-md-12 col-sm-12 col-lg-12 no-padding green"
                                                                *ngIf="bill_data.billStatus == 'Settled'">
                                                                Settled</div>


                                                        </div>
                                                    </div>
                                                    <app-common-innerloading-spinner *ngIf="loadingPaytm">
                                                    </app-common-innerloading-spinner>
                                                    <div class="bill-content">
                                                        <div class="section-three bill-responsive no-padding-small">
                                                            <div class="bill-breakup">
                                                                <div *ngIf="bill_data.service">
                                                                    <div class="list"
                                                                    *ngFor="let service of bill_data.service; let i = index">
                                                                    <div class="list-content">
                                                                        <div class="c-row one servlist">
                                                                            <div class="name">
                                                                                {{service.serviceName |
                                                                                capitalizeFirst}}
                                                                                <span class="rupee-font">{{service.price
                                                                                    | currency:'&#8377;
                                                                                    '}}</span>

                                                                                <span [matTooltipClass]="tooltipcls"
                                                                                    [matTooltip]="'Taxable'"
                                                                                    *ngIf="service.GSTpercentage > 0"><sup>Tax</sup></span>
                                                                            </div>
                                                                            <div class="quantity">{{qnty_cap}}
                                                                                {{service.quantity}}</div>
                                                                            <div class="price rupee-font">
                                                                                {{(service.quantity *
                                                                                service.price) |
                                                                                currency:'&#8377; '}}</div>
                                                                        </div>
                                                                        <div class="c-row two section-two">
                                                                            <div class="discount-row two-col"
                                                                                *ngFor="let discount of service.discount">
                                                                                <div class="name">
                                                                                    {{discount.name}}
                                                                                </div>
                                                                                <div class="price rupee-font">
                                                                                    (-){{discount.discountValue
                                                                                    |
                                                                                    currency:'&#8377; '}}</div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="c-row one three two-col"
                                                                            *ngIf="service.discount &&service.discount.length > 0">
                                                                            <div class="name">
                                                                                {{sub_tot_cap}}
                                                                            </div>
                                                                            <div class="price rupee-font">
                                                                                {{service.netRate |
                                                                                currency:'&#8377; '}}</div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                </div>
                                                                <div *ngIf="bill_data.items">
                                                                <div class="list"
                                                                    *ngFor="let item of bill_data.items; let i = index">
                                                                    <div class="list-content">
                                                                        <div class="c-row one servlist">
                                                                            <div class="name">
                                                                                {{item.itemName |
                                                                                capitalizeFirst}}
                                                                                <span class="rupee-font">{{item.price
                                                                                    |
                                                                                    currency:'&#8377; '}}
                                                                                </span>
                                                                                <span [matTooltipClass]="tooltipcls"
                                                                                    [matTooltip]="'Taxable'"
                                                                                    *ngIf="item.GSTpercentage > 0"><sup>Tax</sup></span>
                                                                            </div>
                                                                            <div class="quantity">{{qnty_cap}}
                                                                                {{item.quantity}}</div>
                                                                            <div class="price rupee-font">
                                                                                {{(item.quantity * item.price) |
                                                                                currency:'&#8377; '}}</div>
                                                                        </div>
                                                                        <div class="c-row two section-two">
                                                                            <div class="discount-row two-col"
                                                                                *ngFor="let discount of item.discount">
                                                                                <div class="name">
                                                                                    {{discount.name}}
                                                                                </div>
                                                                                <div class="price rupee-font">
                                                                                    (-){{discount.discountValue
                                                                                    |
                                                                                    currency:'&#8377; '}}</div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="c-row one three two-col"
                                                                            *ngIf="item.discount && item.discount.length > 0">
                                                                            <div class="name">
                                                                                {{sub_tot_cap}}
                                                                            </div>
                                                                            <div class="price rupee-font">
                                                                                {{item.netRate |
                                                                                currency:'&#8377; '}}</div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                                <div class="list bill-summary">
                                                                    <div class="list-content">
                                                                        <div class="c-row one two-col">
                                                                            <div class="name">
                                                                                {{gross_amnt_cap}}
                                                                            </div>
                                                                            <div class="price rupee-font">
                                                                                {{bill_data.netTotal |
                                                                                currency:'&#8377; '}}
                                                                            </div>
                                                                        </div>
                                                                        <div class="c-row two section-two">
                                                                            <div class="discount-row two-col"
                                                                                *ngIf="bill_data.jdn && bill_data.jdn.discount">
                                                                                <div class="name">JDN</div>
                                                                                <div class="price rupee-font">
                                                                                    (-){{bill_data.jdn.discount
                                                                                    |
                                                                                    currency:'&#8377; '}}</div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="c-row two section-two"
                                                                            *ngFor="let discount of bill_data.discount">
                                                                            <div class="discount-row two-col">
                                                                                <div class="name">
                                                                                    {{discount.name}}
                                                                                </div>
                                                                                <div class="price rupee-font">
                                                                                    (-){{discount.discountValue |
                                                                                    currency:'&#8377; '}}</div>
                                                                            </div>
                                                                        </div>

                                                                        <div *ngIf="bill_data.proCouponList">
                                                                            <div class="c-row two section-two"
                                                                            *ngFor="let coupon of bill_data.proCouponList">
                                                                            <div class="discount-row two-col">
                                                                                <div class="name">
                                                                                    {{coupon.couponCode}}
                                                                                </div>
                                                                                <div class="price rupee-font">
                                                                                    <span>(-)</span>
                                                                                    <span
                                                                                        (click)="showJCCouponNote(coupon)"
                                                                                        [class.couponAmt]="coupon.discount">{{coupon.discount
                                                                                        |
                                                                                        currency:'&#8377;
                                                                                        '}}</span>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        </div>
                                                                        
                                                                        <div class="c-row two section-two"
                                                                            *ngFor="let jcoupon of bill_data.jCouponList">
                                                                            <div class="discount-row two-col">
                                                                                <div class="name">
                                                                                    {{jcoupon.couponCode}}
                                                                                </div>
                                                                                <div class="price rupee-font">
                                                                                    <span>(-)</span>
                                                                                    <span
                                                                                        (click)="showJCCouponNote(jcoupon)"
                                                                                        [class.couponAmt]="jcoupon.discount">{{jcoupon.discount
                                                                                        |
                                                                                        currency:'&#8377;
                                                                                        '}}</span>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="c-row two section-two"
                                                                            *ngIf="bill_data.taxableTotal">
                                                                            <div class="discount-row two-col">
                                                                                <div class="name">
                                                                                    <span class="tax-top">Tax
                                                                                        <span class="rupee-font">
                                                                                            {{bill_data.taxPercentage}}%
                                                                                            of
                                                                                            {{bill_data.taxableTotal
                                                                                            |
                                                                                            currency:'&#8377;
                                                                                            '}}</span>
                                                                                    </span><br /><span
                                                                                        class="txn">(CGST-{{bill_data.taxPercentage/2}}%,
                                                                                        SGST-{{bill_data.taxPercentage/2}}%)</span>
                                                                                </div>
                                                                                <div class="price rupee-font">
                                                                                    (+){{bill_data.totalTaxAmount
                                                                                    |
                                                                                    currency:'&#8377; '}}</div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="c-row one two-col"
                                                                            *ngIf="bill_data.netRate > 0">
                                                                            <div class="name">
                                                                                Net Total
                                                                            </div>
                                                                            <div class="price rupee-font">
                                                                                {{bill_data.netRate |
                                                                                currency:'&#8377; '}}</div>
                                                                        </div>
                                                                        <div class="c-row two section-two"
                                                                            *ngIf="bill_data.customerPaidCharges > 0">
                                                                            <div class="discount-row two-col">
                                                                                <div class="name">
                                                                                    Processing Fee
                                                                                </div>
                                                                                <div class="price rupee-font">
                                                                                    {{bill_data.customerPaidCharges
                                                                                    |
                                                                                    currency:'&#8377; '}}</div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="c-row two section-two"
                                                                            *ngIf="bill_data.totalAmountPaid > 0">
                                                                            <div class="discount-row two-col">
                                                                                <div class="name">
                                                                                    Amount Paid
                                                                                </div>
                                                                                <div class="price rupee-font">
                                                                                    {{bill_data.totalAmountPaid
                                                                                    |
                                                                                    currency:'&#8377; '}}</div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="c-row one two-col"
                                                                            *ngIf="bill_data.amountDue >= 0">
                                                                            <div class="name">
                                                                                Amount Due
                                                                            </div>
                                                                            <div class="price rupee-font">
                                                                                {{checkJcash ?
                                                                                ((bill_data.amountDue -
                                                                                jcashamount) |
                                                                                currency:'&#8377;' ):
                                                                                (bill_data.amountDue |
                                                                                currency:'&#8377;') }}
                                                                            </div>
                                                                        </div>
                                                                        <div class="c-row one two-col"
                                                                            *ngIf="bill_data.amountDue < 0">
                                                                            <div class="name">Refundable Amount
                                                                            </div>
                                                                            <div class="price rupee-font">
                                                                                {{refund_value |
                                                                                currency:'&#8377; '}}</div>
                                                                        </div>
                                                                        <div class="c-row one two-col"
                                                                            *ngIf="bill_data.refundedAmount > 0">
                                                                            <div class="name">Amount Refunded
                                                                            </div>
                                                                            <div class="price rupee-font">
                                                                                {{bill_data.refundedAmount |
                                                                                currency:'&#8377; '}}</div>
                                                                        </div>
                                                                        <div class="amountSaved"
                                                                            *ngIf="bill_data.totalAmountSaved > 0 && bill_data.billPaymentStatus != 'FullyPaid'">
                                                                            <div class="price rupee-font"> You
                                                                                will save
                                                                                {{bill_data.totalAmountSaved |
                                                                                currency:'&#8377;'}}
                                                                            </div>
                                                                        </div>
                                                                        <div class="amountSaved"
                                                                            *ngIf="bill_data.totalAmountSaved > 0 && bill_data.billPaymentStatus == 'FullyPaid'">
                                                                            <div class="price rupee-font"> You
                                                                                have saved
                                                                                {{bill_data.totalAmountSaved |
                                                                                currency:'&#8377;'}}
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="section-three no-padding-small"
                                                            *ngIf="checkin && checkin.displayNote || (checkin.discounts && checkin.discounts.length > 0 && checkin.discounts.displayNote)">
                                                            <a class="learnmore-pointer" id="customer-help"
                                                                (click)="billNotesClicked()">Invoice notes</a>
                                                            <div class="bill-notes"
                                                                *ngIf="showBillNotes">
                                                                <ul>
                                                                    <li *ngIf="checkin.displayNote">
                                                                        {{checkin.displayNote}}
                                                                    </li>
                                                                    <div class
                                                                        *ngFor="let discount of checkin.discounts">
                                                                        <li *ngIf="discount.displayNote">
                                                                            <span style="font-weight: 600">
                                                                                {{discount.name}} -
                                                                            </span>
                                                                            {{discount.displayNote}}
                                                                        </li>
                                                                    </div>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="section-three other-section no-padding-small"
                                                    *ngIf="bill_data.billStatus !== 'Cancel' && bill_data.billStatus !== 'Settled' && (bill_data.amountDue > 0)">
                                                    <div class="col-md-12 col-sm-12 col-12 no-padding"
                                                        *ngIf="this.couponList.JC.length > 0 ||this.couponList.OWN.length && bill_data && bill_data.billPaymentStatus!='FullyPaid' && bill_data.billStatus != 'Settled' && paymode && (bill_data.amountDue > 0)">
                                                        <div class="title-sec col-md-12 col-sm-12 col-12 no-padding">
                                                            <span class=""> Coupon</span>
                                                        </div>
                                                        <div
                                                            class="col-md-12 col-sm-12 col-12 no-padding jc-sec-bill">
                                                            <div class="section-two">
                                                                <div class="add-j-coupon edit-row service">
                                                                    <div
                                                                        class="spl col-md-3 col-sm-4 col-lg-3 col-5 no-padding">
                                                                        <div class="item selectbox">
                                                                            <input class="coupon-text-bill" type="text"
                                                                                #jcoupon
                                                                                placeholder="Enter Your Coupon Code"
                                                                                [(ngModel)]="jCoupon">
                                                                        </div>
                                                                    </div>
                                                                    <div
                                                                        class="spr col-md-9 col-sm-8 col-lg-9 col-7 no-padding">
                                                                        <button class="cs-btn bt1"
                                                                            (click)="applyJCoupon()">Apply</button>
                                                                        <button class="cs-btn bt2"
                                                                            (click)="clearJCoupon()">Clear</button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div>
                                                        <div *ngIf="jcashamount>0" style="font-size: medium;">
                                                            <mat-checkbox [(ngModel)]="checkJcash"
                                                                (change)="changeJcashUse($event)">
                                                            </mat-checkbox>
                                                            Use Jaldee cash balance : Rs{{jcashamount}}
                                                        </div>
                                                        <div *ngIf="jcashamount>0 && (checkJcash && jcashamount < bill_data.amountDue)"
                                                            style="font-size: small;">
                                                            Balance amount can be paid by other payment methods
                                                        </div>
                                                    </div>
                                                    <div class="col-md-12 col-sm-12 col-12 no-padding"
                                                        *ngIf=" paidStatus == 'false' && bill_data && bill_data.billPaymentStatus!='FullyPaid' && bill_data.billStatus != 'Settled'  && (bill_data.amountDue > 0)">
                                                        <div
                                                            class="title-sec col-md-12 col-sm-12 col-12-4 no-padding">
                                                            <span class="">Choose any Payment Option</span>
                                                        </div>
                                                        <div class="clearfix"></div>
                                                        <div
                                                            *ngIf=" ((checkJcash && jcashamount < bill_data.amountDue) || (!checkJcash))">
                                                            <ng-container *ngIf="!shownonIndianModes">
                                                                <app-payment-modes [paymentModes]="indian_payment_modes"
                                                                    [cashPay]="false"
                                                                    (modeSelected)="indian_payment_mode_onchange($event)">
                                                                </app-payment-modes>
                                                            </ng-container>
                                                            <ng-container *ngIf="shownonIndianModes">
                                                                <app-payment-modes [paymentModes]="non_indian_modes"
                                                                    [cashPay]="false"
                                                                    (modeSelected)="non_indian_modes_onchange($event)">
                                                                </app-payment-modes>
                                                            </ng-container>
                                                        </div>
                                                        <div class="clearfix"></div>
                                                        <div class="txt-align-center pad_link mgn-up-10"
                                                            *ngIf=" ((checkJcash && jcashamount < bill_data.amountDue) || (!checkJcash))">
                                                            <span [class.disabled]="isClickedOnce"
                                                                (click)="togglepaymentMode()" class="pointer-cursor"><a
                                                                    class="refund_policy">
                                                                    <span
                                                                        *ngIf="!shownonIndianModes && paymentmodes && paymentmodes.internationalPay">Non
                                                                        Indian Payment ? Click
                                                                        here</span>
                                                                    <span
                                                                        *ngIf="shownonIndianModes && paymentmodes && paymentmodes.indiaPay">Indian
                                                                        Payment ? Click
                                                                        here</span>
                                                                </a></span>
                                                        </div>
                                                        <div class="col-md-12 col-sm-12 col-12 cc-dc-nb no-padding"
                                                            style="display: flex">
                                                            <button type="button"
                                                                class="mx-auto mt-3 text-center next-button btn btn-primary font-weight-bold text-uppercase "
                                                                [class.disabled]="isClickedOnce"
                                                                *ngIf=" ((checkJcash && jcashamount < bill_data.amountDue) || (!checkJcash))"
                                                                (click)="!isClickedOnce && payuPayment()">
                                                                MaKe Payment
                                                            </button> &nbsp;&nbsp;
                                                            <button
                                                                class="next-button btn btn-primary font-weight-bold text-uppercase"
                                                                (click)="payuPayment()"
                                                                *ngIf="((checkJcash && jcashamount > bill_data.amountDue) || ( checkJcash && jcashamount == bill_data.amountDue))">
                                                                Confirm</button>
                                                            <br> <br>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div *ngIf="paidStatus == 'true'">
                                                <i class="fa fa-check-circle" style="color: green;"><span
                                                        style="font-size: large;">Paid Successfully</span>
                                                </i><br><br>
                                                <div class="ivc">
                                                    <div class="pay-det-row">
                                                        <span><b>Payment Gateway:</b>
                                                            <span>{{this.pGateway}}</span></span>
                                                    </div>
                                                    <div class="pay-det-row">
                                                        <span><b> Payment Ref Id:</b>
                                                            <span>{{razorpay_payment_id}}</span></span>
                                                    </div>
                                                    <div class="pay-det-row">
                                                        <span><b> Transaction Id:</b>
                                                            <span>{{razorpay_order_id}}</span></span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<section #consumer_checkinbill class="container p0 confirm-aptckn no-padding-small" *ngIf="invoiceInfo === 'true'">
    <div [ngClass]="{'loadingpaytm': loadingPaytm}"></div>
    <div class="content p0 comn-cls cons-check-bill">
        <div class="c-outer" style="margin-bottom: 0px !important;" *ngIf="source == 'provider_history'">
            <div class="c-body">
                <div class="bk-ctrl">
                    <span class="backtoresults" (click)="backtoProviderDetails()">Back to <span
                            class="strong">history</span></span>
                </div>
            </div>
        </div>
        <app-common-innerloading-spinner *ngIf="api_loading"></app-common-innerloading-spinner>
        <div class="col-md-12 no-padding" *ngIf="!api_loading">
            <div class="w-dta">
                <div class="row m-0">
                    <div class="c-outer m0">
                        <div class="c-body">
                            <div class="card title-gb" *ngIf="invoiceDetailsById">
                                <h5 *ngIf="(invoiceDetailsById.amountDue != 0)" class="mgn-up-10">Invoice<a
                                        class="pull-left mgn-rt-20 back-btn" (click)="goBack()"><i
                                            class="fa fa-arrow-left"></i></a></h5>
                                <h5 *ngIf="(invoiceDetailsById.amountDue == 0)" class="mgn-up-10">Invoice<a
                                        class="pull-left mgn-rt-20 back-btn" (click)="goBack()"><i
                                            class="fa fa-arrow-left"></i></a></h5>
                            </div>
                            <div class="copy one">
                                <div class="col-a pl0 col-md-12 col-lg-12 col-xl-12 col-sm-12 col-12 no-padding">
                                    <div class="card bill-section checkin-invoice">
                                        <div class="bill-section-content">
                                            <div class="col-md-12 col-sm-12 col-lg-12 bill-wrapper viewBill no-padding-small"
                                                *ngIf="invoiceDetailsById">
                                                <div class="global-icons col-md-12 col-sm-12 col-lg-12">
                                                    <button (click)="printMe()" [matTooltipClass]="tooltipcls"
                                                        [matTooltip]="'Print'">
                                                        <i class="fa fa-print" aria-hidden="true"></i>
                                                    </button>
                                                </div>
                                                <div id="receipt" class="receipt">
                                                    <div class="bill-header mgn-up-50" *ngIf="!showPaidlist">
                                                        <div class="section-one" *ngIf="splocation">
                                                            <div class="pro-logo1 text-center"  *ngIf="logo">
                                                                <img src="{{logo}}" width="80px" height="80px" >
                                        
                                                            </div>
                                                        <div class="bname-ch"><h3>{{bname | capitalizeFirst}}</h3></div>  
                                                            <span
                                                                style="display:flex;justify-content: center;">{{splocation}}
                                                                <span class="icon-location"></span>
                                                            </span>
                                                            <br><br><br>
                                                            <div style="display: flex;justify-content: space-between;">
                                                                <div>
                                                                    <div *ngIf="invoiceDetailsById.providerConsumerData">
                                                                        <div>
                                                                            <span *ngIf="invoiceDetailsById.providerConsumerData.firstName">{{invoiceDetailsById.providerConsumerData.firstName | capitalizeFirst}}</span>&nbsp;
                                                                            <span *ngIf="invoiceDetailsById.providerConsumerData.lastName">{{invoiceDetailsById.providerConsumerData.lastName | capitalizeFirst}}</span>
                                                                           
                                                                        </div>

                                                                    </div>
                                                                    <div *ngIf="billnumber" style="display: flex;
                                                                            justify-content: start;
                                                                            gap: 5px;">
                                                                        <div>Invoice #</div>
                                                                        <div>{{billnumber}}</div>

                                                                    </div>

                                                                </div>
                                                                <div>
                                                                    <div *ngIf="gstnumber">
                                                                        <div>
                                                                            {{gstin_cap}} :
                                                                            {{gstnumber
                                                                            |
                                                                            capitalizeFirst}}
                                                                        </div>
                                                                    </div>
                                                                    <div *ngIf="billdate">Invoice Date :
                                                                        {{billdate
                                                                        | date:newDateFormat_date}}
                                                                        <!-- {{billtime}} &nbsp; -->
                                                                    </div>
                                                                    <div *ngIf="dueDate">Due Date :
                                                                        {{dueDate
                                                                        | date:newDateFormat_date}}
                                                                        <!-- {{billtime}} &nbsp; -->
                                                                    </div>
                                                                    <div *ngIf="invoiceDetailsById.departmentName">Department :
                                                                        {{invoiceDetailsById.departmentName}}
                                                                        <!-- {{billtime}} &nbsp; -->
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <span class="columns mgn-up-10" *ngIf="invoiceDetailsById.providerData">
                                                                <span class="dynamic">{{provider_label
                                                                    |
                                                                    capitalizeFirst}} : </span>
                                                                <span class="dynamic">
                                                                    {{(invoiceDetailsById.providerData.businessName) ?
                                                                        invoiceDetailsById.providerData.businessName :
                                                                        invoiceDetailsById.providerData.firstName
                                                                    + ' ' + invoiceDetailsById.providerData.lastName}}
                                                                </span>
                                                            </span>

                                                            <div class="col-md-12 col-sm-12 col-lg-12 no-padding red"
                                                                *ngIf="invoiceDetailsById.billStatus == 'Cancel'">
                                                                Cancelled</div>
                                                                <div class="col-md-12 col-sm-12 col-lg-12 no-padding green"
                                                                *ngIf="invoiceDetailsById.billStatus == 'Settled'">
                                                                Settled</div>


                                                        </div>
                                                    </div>
                                                    <app-common-innerloading-spinner *ngIf="loadingPaytm">
                                                    </app-common-innerloading-spinner>
                                                    <div class="bill-content">
                                                        <div class="section-three bill-responsive no-padding-small">
                                                            <div class="bill-breakup">
                                                                <div *ngIf="invoiceDetailsById?.serviceList" >
                                                                    <div class="list">
                                                                        <div class="list-content">
                                                                            <div class="c-row one servlist">
                                                                                <div class="services">Procedure/Item </div>
                                                                                <div class="services">Rate</div>
                                                                                <div class="quantity font-style">Quantity
                                                                                </div>
                                                                                <div class="price rupee-font font-style">
                                                                                    Amount
                                                                                </div>
                                                                            </div>
                                                                        </div>  
                                                                    </div> 
                                                                </div>
                                                                <div class="list"
                                                                    *ngFor="let service of invoiceDetailsById.serviceList; let i = index">
                                                                    <div class="list-content">
                                                                        <div class="c-row one servlist">
                                                                            <div class="services">
                                                                                {{service.serviceName |
                                                                                capitalizeFirst}}
                                                                            </div>
                                                                            <div class="services">                                                                                
                                                                                <span class="rupee-font">{{service.price
                                                                                    | currency:'&#8377;
                                                                                    '}}</span>
                                                                                <span [matTooltipClass]="tooltipcls"
                                                                                    [matTooltip]="'Taxable'"
                                                                                    *ngIf="service.GSTpercentage > 0"><sup>Tax</sup></span></div>
                                                                            <div class="quantity">
                                                                                {{service.quantity}}</div>
                                                                            <div class="price rupee-font">
                                                                                {{(service.quantity *
                                                                                service.price) |
                                                                                currency:'&#8377; '}}</div>
                                                                        </div>
                                                                        <div class="c-row two section-two">
                                                                            <div class="discount-row two-col"
                                                                                *ngFor="let discount of service.discount">
                                                                                <div class="name">
                                                                                    {{discount.name}}
                                                                                </div>
                                                                                <div class="price rupee-font">
                                                                                    (-){{discount.discountValue
                                                                                    |
                                                                                    currency:'&#8377; '}}</div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="c-row one three two-col"
                                                                            *ngIf="service.discount &&service.discount.length > 0">
                                                                            <div class="name">
                                                                                {{sub_tot_cap}}
                                                                            </div>
                                                                            <div class="price rupee-font">
                                                                                {{service.netRate |
                                                                                currency:'&#8377; '}}</div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="list"
                                                                    *ngFor="let item of invoiceDetailsById.itemList; let i = index">
                                                                    <div class="list-content">
                                                                        <div class="c-row one servlist">
                                                                            <div class="name">
                                                                                {{item.itemName |
                                                                                capitalizeFirst}}
                                                                                <span class="rupee-font">{{item.price
                                                                                    |
                                                                                    currency:'&#8377; '}}
                                                                                </span>
                                                                                <span [matTooltipClass]="tooltipcls"
                                                                                    [matTooltip]="'Taxable'"
                                                                                    *ngIf="item.GSTpercentage > 0"><sup>Tax</sup></span>
                                                                            </div>
                                                                            <div class="quantity">{{qnty_cap}}
                                                                                {{item.quantity}}</div>
                                                                            <div class="price rupee-font">
                                                                                {{(item.quantity * item.price) |
                                                                                currency:'&#8377; '}}</div>
                                                                        </div>
                                                                        <div class="c-row two section-two">
                                                                            <div class="discount-row two-col"
                                                                                *ngFor="let discount of item.discount">
                                                                                <div class="name">
                                                                                    {{discount.name}}
                                                                                </div>
                                                                                <div class="price rupee-font">
                                                                                    (-){{discount.discountValue
                                                                                    |
                                                                                    currency:'&#8377; '}}</div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="c-row one three two-col"
                                                                            *ngIf="item.discount && item.discount.length > 0">
                                                                            <div class="name">
                                                                                {{sub_tot_cap}}
                                                                            </div>
                                                                            <div class="price rupee-font">
                                                                                {{item.netRate |
                                                                                currency:'&#8377; '}}</div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="list"
                                                                *ngFor="let item of invoiceDetailsById.adhocItemList; let i = index">
                                                                <div class="list-content">
                                                                    <div class="c-row one servlist">
                                                                        <div class="name">
                                                                            {{item.itemName |
                                                                            capitalizeFirst}}
                                                                            <span class="rupee-font">{{item.price
                                                                                |
                                                                                currency:'&#8377; '}}
                                                                            </span>
                                                                            <span [matTooltipClass]="tooltipcls"
                                                                                [matTooltip]="'Taxable'"
                                                                                *ngIf="item.GSTpercentage > 0"><sup>Tax</sup></span>
                                                                        </div>
                                                                        <div class="quantity">{{qnty_cap}}
                                                                            {{item.quantity}}</div>
                                                                        <div class="price rupee-font">
                                                                            {{(item.quantity * item.price) |
                                                                            currency:'&#8377; '}}</div>
                                                                    </div>
                                                                   
                                                                 
                                                                </div>
                                                            </div>
                                                                <div class="list bill-summary">
                                                                    <div class="list-content">
                                                                        <div class="c-row one two-col">
                                                                            <div class="name">
                                                                                {{gross_amnt_cap}}
                                                                            </div>
                                                                            <div class="price rupee-font">
                                                                                {{invoiceDetailsById.netTotal |
                                                                                currency:'&#8377; '}}
                                                                            </div>
                                                                        </div>
                                                                        <div class="c-row two section-two">
                                                                            <div class="discount-row two-col"
                                                                                *ngIf="invoiceDetailsById.jdn && invoiceDetailsById.jdn.discount">
                                                                                <div class="name">JDN</div>
                                                                                <div class="price rupee-font">
                                                                                    (-){{invoiceDetailsById.jdn.discount
                                                                                    |
                                                                                    currency:'&#8377; '}}</div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="c-row two section-two"
                                                                            *ngFor="let discount of invoiceDetailsById.discounts">
                                                                            <div class="discount-row two-col">
                                                                                <div class="name">
                                                                                    {{discount.name}}
                                                                                </div>
                                                                                <div class="price rupee-font">
                                                                                    (-){{discount.discountValue |
                                                                                    currency:'&#8377; '}}</div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="c-row two section-two"
                                                                            *ngFor="let coupon of invoiceDetailsById.providerCoupons">
                                                                            <div class="discount-row two-col">
                                                                                <div class="name">
                                                                                    {{coupon.couponCode}}
                                                                                </div>
                                                                                <div class="price rupee-font">
                                                                                    <span>(-)</span>
                                                                                    <span
                                                                                        (click)="showJCCouponNote(coupon)"
                                                                                        [class.couponAmt]="coupon.discount">{{coupon.discount
                                                                                        |
                                                                                        currency:'&#8377;
                                                                                        '}}</span>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="c-row two section-two"
                                                                            *ngFor="let jcoupon of invoiceDetailsById.jaldeeCoupons">
                                                                            <div class="discount-row two-col">
                                                                                <div class="name">
                                                                                    {{jcoupon.key}}
                                                                                </div>
                                                                                <div class="price rupee-font">
                                                                                    <span>(-)</span>
                                                                                    <span
                                                                                        (click)="showJCCouponNote(jcoupon)"
                                                                                        [class.couponAmt]="jcoupon.couponCode">{{jcoupon.couponCode
                                                                                        |
                                                                                        currency:'&#8377;
                                                                                        '}}</span>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="c-row two section-two"
                                                                            *ngIf="invoiceDetailsById.taxableTotal">
                                                                            <div class="discount-row two-col">
                                                                                <div class="name">
                                                                                    <span class="tax-top">Tax
                                                                                        <span class="rupee-font">
                                                                                            {{invoiceDetailsById.taxPercentage}}%
                                                                                            of
                                                                                            {{invoiceDetailsById.taxableTotal
                                                                                            |
                                                                                            currency:'&#8377;
                                                                                            '}}</span>
                                                                                    </span><br /><span
                                                                                        class="txn">(CGST-{{invoiceDetailsById.taxPercentage/2}}%,
                                                                                        SGST-{{invoiceDetailsById.taxPercentage/2}}%)</span>
                                                                                </div>
                                                                                <div class="price rupee-font">
                                                                                    (+){{invoiceDetailsById.netTaxAmount
                                                                                    |
                                                                                    currency:'&#8377; '}}</div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="c-row one two-col"
                                                                            *ngIf="invoiceDetailsById.netRate > 0">
                                                                            <div class="name">
                                                                                Net Total
                                                                            </div>
                                                                            <div class="price rupee-font">
                                                                                {{invoiceDetailsById.netRate |
                                                                                currency:'&#8377; '}}</div>
                                                                        </div>
                                                                        <div class="c-row two section-two"
                                                                            *ngIf="invoiceDetailsById.customerPaidCharges > 0">
                                                                            <div class="discount-row two-col">
                                                                                <div class="name">
                                                                                    Processing Fee
                                                                                </div>
                                                                                <div class="price rupee-font">
                                                                                    {{invoiceDetailsById.customerPaidCharges
                                                                                    |
                                                                                    currency:'&#8377; '}}</div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="c-row two section-two"
                                                                            *ngIf="invoiceDetailsById.amountPaid > 0">
                                                                            <div class="discount-row two-col">
                                                                                <div class="name">
                                                                                    Amount Paid
                                                                                </div>
                                                                                <div class="price rupee-font">
                                                                                    {{invoiceDetailsById.amountPaid
                                                                                    |
                                                                                    currency:'&#8377; '}}</div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="c-row one two-col"
                                                                            *ngIf="invoiceDetailsById.amountDue >= 0">
                                                                            <div class="name">
                                                                                Amount Due
                                                                            </div>
                                                                            <div class="price rupee-font">
                                                                                {{checkJcash ?
                                                                                ((invoiceDetailsById.amountDue -
                                                                                jcashamount) |
                                                                                currency:'&#8377;' ):
                                                                                (invoiceDetailsById.amountDue |
                                                                                currency:'&#8377;') }}
                                                                            </div>
                                                                        </div>
                                                                        <div class="c-row one two-col"
                                                                            *ngIf="invoiceDetailsById.amountDue < 0">
                                                                            <div class="name">Refundable Amount
                                                                            </div>
                                                                            <div class="price rupee-font">
                                                                                {{refund_value |
                                                                                currency:'&#8377; '}}</div>
                                                                        </div>
                                                                        <div class="c-row one two-col"
                                                                            *ngIf="invoiceDetailsById.refundedAmount > 0">
                                                                            <div class="name">Amount Refunded
                                                                            </div>
                                                                            <div class="price rupee-font">
                                                                                {{invoiceDetailsById.refundedAmount |
                                                                                currency:'&#8377; '}}</div>
                                                                        </div>
                                                                        <div class="amountSaved"
                                                                            *ngIf="invoiceDetailsById.totalAmountSaved > 0 && invoiceDetailsById.billPaymentStatus != 'FullyPaid'">
                                                                            <div class="price rupee-font"> You
                                                                                will save
                                                                                {{invoiceDetailsById.totalAmountSaved |
                                                                                currency:'&#8377;'}}
                                                                            </div>
                                                                        </div>
                                                                        <div class="amountSaved"
                                                                            *ngIf="invoiceDetailsById.totalAmountSaved > 0 && invoiceDetailsById.billPaymentStatus == 'FullyPaid'">
                                                                            <div class="price rupee-font"> You
                                                                                have saved
                                                                                {{invoiceDetailsById.totalAmountSaved |
                                                                                currency:'&#8377;'}}
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="section-three no-padding-small"
                                                        *ngIf="invoiceDetailsById && invoiceDetailsById.notesForCustomer || (invoiceDetailsById.discounts && invoiceDetailsById.discounts.length > 0 && invoiceDetailsById.discounts.displayNote)">
                                                            <a class="learnmore-pointer" id="customer-help"
                                                                (click)="billNotesClicked()">Invoice notes</a>
                                                            <div class="bill-notes"
                                                                *ngIf="showBillNotes">
                                                                <ul>
                                                                    <li *ngIf="invoiceDetailsById.notesForCustomer">
                                                                        {{invoiceDetailsById.notesForCustomer}}
                                                                    </li>
                                                                    <div class
                                                                        *ngFor="let discount of invoiceDetailsById.discounts">
                                                                        <li *ngIf="discount.displayNote">
                                                                            <span style="font-weight: 600">
                                                                                {{discount.name}} -
                                                                            </span>
                                                                            {{discount.displayNote}}
                                                                        </li>
                                                                    </div>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="section-three other-section no-padding-small"
                                                    *ngIf="invoiceDetailsById.billStatus !== 'Cancel' && invoiceDetailsById.billStatus !== 'Settled' && (invoiceDetailsById.amountDue > 0)">
                                                    <div class="col-md-12 col-sm-12 col-12 no-padding"
                                                        *ngIf="this.couponList.JC.length > 0 ||this.couponList.OWN.length && invoiceDetailsById && invoiceDetailsById.billPaymentStatus!='FullyPaid' && invoiceDetailsById.billStatus != 'Settled' && paymode && (invoiceDetailsById.amountDue > 0)">
                                                        <div class="title-sec col-md-12 col-sm-12 col-12 no-padding">
                                                            <span class=""> Coupon</span>
                                                        </div>
                                                        <div
                                                            class="col-md-12 col-sm-12 col-12 no-padding jc-sec-bill">
                                                            <div class="section-two">
                                                                <div class="add-j-coupon edit-row service">
                                                                    <div
                                                                        class="spl col-md-3 col-sm-4 col-lg-3 col-5 no-padding">
                                                                        <div class="item selectbox">
                                                                            <input class="coupon-text-bill" type="text"
                                                                                #jcoupon
                                                                                placeholder="Enter Your Coupon Code"
                                                                                [(ngModel)]="jCoupon">
                                                                        </div>
                                                                    </div>
                                                                    <div
                                                                        class="spr col-md-9 col-sm-8 col-lg-9 col-7 no-padding">
                                                                        <button class="cs-btn bt1"
                                                                            (click)="applyJCoupon()">Apply</button>
                                                                        <button class="cs-btn bt2"
                                                                            (click)="clearJCoupon()">Clear</button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div>
                                                        <div *ngIf="jcashamount>0" style="font-size: medium;">
                                                            <mat-checkbox [(ngModel)]="checkJcash"
                                                                (change)="changeJcashUse($event)">
                                                            </mat-checkbox>
                                                            Use Jaldee cash balance : Rs{{jcashamount}}
                                                        </div>
                                                        <div *ngIf="jcashamount>0 && (checkJcash && jcashamount < invoiceDetailsById.amountDue)"
                                                            style="font-size: small;">
                                                            Balance amount can be paid by other payment methods
                                                        </div>
                                                    </div>
                                                    <div class="col-md-12 col-sm-12 col-12 no-padding"
                                                        *ngIf=" paidStatus == 'false' && invoiceDetailsById && invoiceDetailsById.billPaymentStatus!='FullyPaid' && invoiceDetailsById.billStatus != 'Settled'  && (invoiceDetailsById.amountDue > 0)">
                                                        <div
                                                            class="title-sec col-md-12 col-sm-12 col-12 mb-4 no-padding">
                                                            <span class="">Choose any Payment Option</span>
                                                        </div>
                                                        <div class="clearfix"></div>
                                                        <div
                                                            *ngIf=" ((checkJcash && jcashamount < invoiceDetailsById.amountDue) || (!checkJcash))">
                                                            <ng-container *ngIf="!shownonIndianModes">
                                                                <app-payment-modes [paymentModes]="indian_payment_modes"
                                                                    [cashPay]="false"
                                                                    (modeSelected)="indian_payment_mode_onchange($event)">
                                                                </app-payment-modes>
                                                            </ng-container>
                                                            <ng-container *ngIf="shownonIndianModes">
                                                                <app-payment-modes [paymentModes]="non_indian_modes"
                                                                    [cashPay]="false"
                                                                    (modeSelected)="non_indian_modes_onchange($event)">
                                                                </app-payment-modes>
                                                            </ng-container>
                                                        </div>
                                                        <div class="clearfix"></div>
                                                        <div class="txt-align-center pad_link mgn-up-10"
                                                            *ngIf=" ((checkJcash && jcashamount < invoiceDetailsById.amountDue) || (!checkJcash))">
                                                            <span [class.disabled]="isClickedOnce"
                                                                (click)="togglepaymentMode()" class="pointer-cursor">
                                                                <a
                                                                    class="refund_policy">
                                                                    <span
                                                                        *ngIf="!shownonIndianModes && paymentmodes && paymentmodes.internationalPay">Non
                                                                        Indian Payment ? Click
                                                                        here</span>
                                                                    <span
                                                                        *ngIf="shownonIndianModes && paymentmodes && paymentmodes.indiaPay">Indian
                                                                        Payment ? Click
                                                                        here</span>
                                                                </a></span>
                                                        </div>
                                                        <div class="clearfix"></div>
                                                        <div class="col-md-12 col-sm-12 col-12 cc-dc-nb no-padding"
                                                            style="display: flex">
                                                            <button type="button"
                                                                class="mx-auto mt-3 text-center next-button btn btn-primary font-weight-bold text-uppercase "
                                                                [class.disabled]="isClickedOnce"
                                                                *ngIf=" ((checkJcash && jcashamount < invoiceDetailsById.amountDue) || (!checkJcash))"
                                                                (click)="!isClickedOnce && payuPayment()">
                                                                MaKe Payment
                                                            </button> &nbsp;&nbsp;
                                                            <button
                                                                class="next-button btn btn-primary font-weight-bold text-uppercase"
                                                                (click)="payuPayment()"
                                                                *ngIf="((checkJcash && jcashamount > invoiceDetailsById.amountDue) || ( checkJcash && jcashamount == invoiceDetailsById.amountDue))">
                                                                Confirm</button>
                                                            <br> <br>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div *ngIf="paidStatus == 'true'">
                                                <i class="fa fa-check-circle" style="color: green;"><span
                                                        style="font-size: large;">Paid Successfully</span>
                                                </i><br><br>
                                                <div class="ivc">
                                                    <div class="pay-det-row">
                                                        <span><b>Payment Gateway:</b>
                                                            <span>{{this.pGateway}}</span></span>
                                                    </div>
                                                    <div class="pay-det-row">
                                                        <span><b> Payment Ref Id:</b>
                                                            <span>{{razorpay_payment_id}}</span></span>
                                                    </div>
                                                    <div class="pay-det-row">
                                                        <span><b> Transaction Id:</b>
                                                            <span>{{razorpay_order_id}}</span></span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<div [innerHTML]="payment_popup" #div [style.display]="'none'"></div>